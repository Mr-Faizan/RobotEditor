\doxysection{mesh\+\_\+misc\+\_\+functions.\+h}
\hypertarget{mesh__misc__functions_8h_source}{}\label{mesh__misc__functions_8h_source}\index{RobotLib/libraries/assimp/contrib/draco/src/draco/mesh/mesh\_misc\_functions.h@{RobotLib/libraries/assimp/contrib/draco/src/draco/mesh/mesh\_misc\_functions.h}}
\mbox{\hyperlink{mesh__misc__functions_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2016\ The\ Draco\ Authors.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ \textcolor{comment}{//}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ This\ file\ contains\ misc\ functions\ that\ are\ needed\ by\ several\ mesh\ related}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ algorithms.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#ifndef\ DRACO\_MESH\_MESH\_MISC\_FUNCTIONS\_H\_}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ DRACO\_MESH\_MESH\_MISC\_FUNCTIONS\_H\_}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{corner__table_8h}{draco/mesh/corner\_table.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assimp_2contrib_2draco_2src_2draco_2mesh_2mesh_8h}{draco/mesh/mesh.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{comment}{//\ The\ file\ contains\ functions\ that\ use\ both\ Mesh\ and\ CornerTable\ as\ inputs.}}
\DoxyCodeLine{00025\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedraco}{draco}}\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{comment}{//\ Creates\ a\ CornerTable\ from\ the\ position\ attribute\ of\ |mesh|.\ Returns\ nullptr}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ on\ error.}}
\DoxyCodeLine{00029\ std::unique\_ptr<CornerTable>\ \mbox{\hyperlink{namespacedraco_affeb9ca81e3f120b64a840f5ed21c4e7}{CreateCornerTableFromPositionAttribute}}(}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh}{Mesh}}\ *mesh);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{comment}{//\ Creates\ a\ CornerTable\ from\ the\ first\ named\ attribute\ of\ |mesh|\ with\ a\ given}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ type.\ Returns\ nullptr\ on\ error.}}
\DoxyCodeLine{00034\ std::unique\_ptr<CornerTable>\ \mbox{\hyperlink{namespacedraco_a4afa0cea524155a8af7f96a5cca8529f}{CreateCornerTableFromAttribute}}(}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh}{Mesh}}\ *mesh,\ \mbox{\hyperlink{classdraco_1_1_geometry_attribute_affa28359c6ae310b23a9af78a9dc4800}{GeometryAttribute::Type}}\ type);}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{comment}{//\ Creates\ a\ CornerTable\ from\ all\ attributes\ of\ |mesh|.\ Boundaries\ are}}
\DoxyCodeLine{00038\ \textcolor{comment}{//\ automatically\ introduced\ on\ all\ attribute\ seams.\ Returns\ nullptr\ on\ error.}}
\DoxyCodeLine{00039\ std::unique\_ptr<CornerTable>\ \mbox{\hyperlink{namespacedraco_a84c1c7c2820ded1ab48d1f71c2aaf7b9}{CreateCornerTableFromAllAttributes}}(}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh}{Mesh}}\ *mesh);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{//\ Returns\ true\ when\ the\ given\ corner\ lies\ opposite\ to\ an\ attribute\ seam.}}
\DoxyCodeLine{00043\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacedraco_aaa591d6929960bf7804b7aefa305c72b}{IsCornerOppositeToAttributeSeam}}(\mbox{\hyperlink{namespacedraco_aac30b704609fccad3db268f914c2ffc0}{CornerIndex}}\ ci,}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_point_attribute}{PointAttribute}}\ \&att,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh}{Mesh}}\ \&mesh,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_corner_table}{CornerTable}}\ \&ct)\ \{}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacedraco_aac30b704609fccad3db268f914c2ffc0}{CornerIndex}}\ opp\_ci\ =\ ct.\mbox{\hyperlink{classdraco_1_1_corner_table_a27382c3977968274753fba8e9c771e5f}{Opposite}}(ci);}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordflow}{if}\ (opp\_ci\ ==\ kInvalidCornerIndex)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//\ No\ opposite\ corner\ ==\ no\ attribute\ seam.}}
\DoxyCodeLine{00050\ \ \ \}}
\DoxyCodeLine{00051\ \ \ \textcolor{comment}{//\ Compare\ attribute\ value\ indices\ on\ both\ ends\ of\ the\ opposite\ edge.}}
\DoxyCodeLine{00052\ \ \ \mbox{\hyperlink{namespacedraco_aac30b704609fccad3db268f914c2ffc0}{CornerIndex}}\ c0\ =\ ct.\mbox{\hyperlink{classdraco_1_1_corner_table_a7f74f0c95835512cbe779a023fa1a339}{Next}}(ci);}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{namespacedraco_aac30b704609fccad3db268f914c2ffc0}{CornerIndex}}\ c1\ =\ ct.\mbox{\hyperlink{classdraco_1_1_corner_table_aadbabeb3aeba27cc3bcffb342afb5638}{Previous}}(opp\_ci);}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (att.\mbox{\hyperlink{classdraco_1_1_point_attribute_a7d6f9d6b243c2c8fe3869e59486613c2}{mapped\_index}}(mesh.CornerToPointId(c0))\ !=}
\DoxyCodeLine{00055\ \ \ \ \ \ \ att.\mbox{\hyperlink{classdraco_1_1_point_attribute_a7d6f9d6b243c2c8fe3869e59486613c2}{mapped\_index}}(mesh.CornerToPointId(c1)))\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00057\ \ \ \}}
\DoxyCodeLine{00058\ \ \ c0\ =\ ct.\mbox{\hyperlink{classdraco_1_1_corner_table_aadbabeb3aeba27cc3bcffb342afb5638}{Previous}}(ci);}
\DoxyCodeLine{00059\ \ \ c1\ =\ ct.\mbox{\hyperlink{classdraco_1_1_corner_table_a7f74f0c95835512cbe779a023fa1a339}{Next}}(opp\_ci);}
\DoxyCodeLine{00060\ \ \ \textcolor{keywordflow}{if}\ (att.\mbox{\hyperlink{classdraco_1_1_point_attribute_a7d6f9d6b243c2c8fe3869e59486613c2}{mapped\_index}}(mesh.CornerToPointId(c0))\ !=}
\DoxyCodeLine{00061\ \ \ \ \ \ \ att.\mbox{\hyperlink{classdraco_1_1_point_attribute_a7d6f9d6b243c2c8fe3869e59486613c2}{mapped\_index}}(mesh.CornerToPointId(c1)))\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00065\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{comment}{//\ Interpolates\ an\ attribute\ value\ on\ a\ face\ using\ given\ barycentric}}
\DoxyCodeLine{00068\ \textcolor{comment}{//\ coordinates.\ InterpolatedVectorT\ should\ be\ a\ VectorD\ that\ corresponds\ to\ the}}
\DoxyCodeLine{00069\ \textcolor{comment}{//\ values\ stored\ in\ the\ attribute.}}
\DoxyCodeLine{00070\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InterpolatedVectorT>}
\DoxyCodeLine{00071\ InterpolatedVectorT\ \mbox{\hyperlink{namespacedraco_a0ba1b424fd498ddbf84d72a74e5f1843}{ComputeInterpolatedAttributeValueOnMeshFace}}(}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh}{Mesh}}\ \&mesh,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_point_attribute}{PointAttribute}}\ \&attribute,\ \mbox{\hyperlink{namespacedraco_ae8d73eb8b85a102ee0f4928acf80f3cf}{FaceIndex}}\ fi,}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{const}\ std::array<float,\ 3>\ \&barycentric\_coord)\ \{}
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdraco_1_1_mesh_ac2ca6da8ad1aa11c7934ed0a4054e7fc}{Mesh::Face}}\ \&face\ =\ mesh.face(fi);}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ Get\ values\ for\ all\ three\ corners\ of\ the\ face.}}
\DoxyCodeLine{00076\ \ \ InterpolatedVectorT\ val[3];}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ c\ =\ 0;\ c\ <\ 3;\ ++c)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ attribute.\mbox{\hyperlink{classdraco_1_1_point_attribute_adb6ff0698f66c27c1bc586d6e4e31cd7}{GetMappedValue}}(face[c],\ \&(val[c][0]));}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Return\ an\ interpolated\ value.}}
\DoxyCodeLine{00081\ \ \ InterpolatedVectorT\ res;}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ d\ =\ 0;\ d\ <\ InterpolatedVectorT::dimension;\ ++d)\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ interpolated\_component\ =\ barycentric\_coord[0]\ *\ val[0][d]\ +}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ barycentric\_coord[1]\ *\ val[1][d]\ +}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ barycentric\_coord[2]\ *\ val[2][d];}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{if}\ (std::is\_integral<typename\ InterpolatedVectorT::Scalar>::value)\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ res[d]\ =\ std::floor(interpolated\_component\ +\ 0.5f);}
\DoxyCodeLine{00088\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ res[d]\ =\ interpolated\_component;}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ \ \ \}}
\DoxyCodeLine{00092\ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \}\ \ \textcolor{comment}{//\ namespace\ draco}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ DRACO\_MESH\_MESH\_MISC\_FUNCTIONS\_H\_}}

\end{DoxyCode}
