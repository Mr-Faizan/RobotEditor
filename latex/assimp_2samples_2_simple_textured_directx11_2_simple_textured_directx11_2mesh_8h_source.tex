\doxysection{Mesh.\+h}
\hypertarget{assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2mesh_8h_source}{}\label{assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2mesh_8h_source}\index{RobotLib/libraries/assimp/samples/SimpleTexturedDirectx11/SimpleTexturedDirectx11/Mesh.h@{RobotLib/libraries/assimp/samples/SimpleTexturedDirectx11/SimpleTexturedDirectx11/Mesh.h}}
\mbox{\hyperlink{assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2mesh_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ MESH\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ MESH\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <d3d11\_1.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <DirectXMath.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{using\ namespace\ }DirectX;}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_safe_release_8hpp}{SafeRelease.hpp}}"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_v_e_r_t_e_x}{VERTEX}}\ \{}
\DoxyCodeLine{00018\ \ \ \ \ FLOAT\ \mbox{\hyperlink{struct_v_e_r_t_e_x_ac2f0287c149befbdd3bec1f59a8f8b8c}{X}},\ \mbox{\hyperlink{struct_v_e_r_t_e_x_a6f50ecf5da5f7ce8cea0dbcd5982bf4a}{Y}},\ \mbox{\hyperlink{struct_v_e_r_t_e_x_a3cc14d26e735ca8b26fb851890f5b4cd}{Z}};}
\DoxyCodeLine{00019\ \ \ \ \ XMFLOAT2\ \mbox{\hyperlink{struct_v_e_r_t_e_x_ae401e0e510bd42bca393fe88e7d401bb}{texcoord}};}
\DoxyCodeLine{00020\ \};}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_texture}{Texture}}\ \{}
\DoxyCodeLine{00023\ \ \ \ \ std::string\ \mbox{\hyperlink{struct_texture_a916a835d009806f2a57546c7705942b1}{type}};}
\DoxyCodeLine{00024\ \ \ \ \ std::string\ \mbox{\hyperlink{struct_texture_aa8ba4ade408b0df1fc9b6f605a4efd22}{path}};}
\DoxyCodeLine{00025\ \ \ \ \ ID3D11ShaderResourceView\ *\mbox{\hyperlink{struct_texture_a31204bf3a3280e029b61b2faf28447ed}{texture}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_texture_a9262c7fa9242a06ad4900d93d186a941}{Release}}()\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_safe_release_8hpp_a4c2c3579083258bd0ca0309d0f353510}{SafeRelease}}(\mbox{\hyperlink{struct_texture_a31204bf3a3280e029b61b2faf28447ed}{texture}});}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ \};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }\mbox{\hyperlink{interface_mesh}{Mesh}}\ \{}
\DoxyCodeLine{00033\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00034\ \ \ \ \ std::vector<VERTEX>\ \mbox{\hyperlink{interface_mesh_ae5b7568e5d475ead4b4d2d9135b04771}{vertices\_}};}
\DoxyCodeLine{00035\ \ \ \ \ std::vector<UINT>\ \mbox{\hyperlink{interface_mesh_aafd1efe92e5ea79aec6ce056aa32ecb9}{indices\_}};}
\DoxyCodeLine{00036\ \ \ \ \ std::vector<Texture>\ \mbox{\hyperlink{interface_mesh_aac6b1a84f27f003bda8c4e48ffa4f475}{textures\_}};}
\DoxyCodeLine{00037\ \ \ \ \ ID3D11Device\ *\mbox{\hyperlink{interface_mesh_af0e123419362b9a7b02ff9af6298cbc7}{dev\_}};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{interface_mesh_ae0c16bad1210017f838bcad5fa1797b5}{Mesh}}(ID3D11Device\ *\mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_a2b7d9ef4b90331632cd9eaf2cc70d178}{dev}},\ \textcolor{keyword}{const}\ std::vector<VERTEX>\&\ vertices,\ \textcolor{keyword}{const}\ std::vector<UINT>\&\ indices,\ \textcolor{keyword}{const}\ std::vector<Texture>\&\ textures)\ :}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_ae5b7568e5d475ead4b4d2d9135b04771}{vertices\_}}(vertices),}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_aafd1efe92e5ea79aec6ce056aa32ecb9}{indices\_}}(indices),}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_aac6b1a84f27f003bda8c4e48ffa4f475}{textures\_}}(textures),}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_af0e123419362b9a7b02ff9af6298cbc7}{dev\_}}(\mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_a2b7d9ef4b90331632cd9eaf2cc70d178}{dev}}),}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ VertexBuffer\_(\mbox{\hyperlink{_open_d_d_l_common_8h_ab979d9d4b4923f7c54d6caa6e1a61936}{nullptr}}),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ IndexBuffer\_(\mbox{\hyperlink{_open_d_d_l_common_8h_ab979d9d4b4923f7c54d6caa6e1a61936}{nullptr}})\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ this-\/>setupMesh(this-\/>dev\_);}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{interface_mesh_a35fb9c957419607a1333a7acef58c7b1}{Draw}}(ID3D11DeviceContext\ *\mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_aad0ded98733c769d46234c712d38cb87}{devcon}})\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ UINT\ stride\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_v_e_r_t_e_x}{VERTEX}});}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ UINT\ \mbox{\hyperlink{zlib_2contrib_2minizip_2ioapi_8h_a601c4660e8a1a14a1b87fe387e934d19}{offset}}\ =\ 0;}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_aad0ded98733c769d46234c712d38cb87}{devcon}}-\/>IASetVertexBuffers(0,\ 1,\ \&VertexBuffer\_,\ \&stride,\ \&\mbox{\hyperlink{zlib_2contrib_2minizip_2ioapi_8h_a601c4660e8a1a14a1b87fe387e934d19}{offset}});}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_aad0ded98733c769d46234c712d38cb87}{devcon}}-\/>IASetIndexBuffer(IndexBuffer\_,\ DXGI\_FORMAT\_R32\_UINT,\ 0);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_aad0ded98733c769d46234c712d38cb87}{devcon}}-\/>PSSetShaderResources(0,\ 1,\ \&\mbox{\hyperlink{interface_mesh_aac6b1a84f27f003bda8c4e48ffa4f475}{textures\_}}[0].texture);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_aad0ded98733c769d46234c712d38cb87}{devcon}}-\/>DrawIndexed(\textcolor{keyword}{static\_cast<}UINT\textcolor{keyword}{>}(\mbox{\hyperlink{interface_mesh_aafd1efe92e5ea79aec6ce056aa32ecb9}{indices\_}}.size()),\ 0,\ 0);}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{interface_mesh_ab24b7413980cfa2d86a029aebd8c5b91}{Close}}()\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_safe_release_8hpp_a4c2c3579083258bd0ca0309d0f353510}{SafeRelease}}(VertexBuffer\_);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_safe_release_8hpp_a4c2c3579083258bd0ca0309d0f353510}{SafeRelease}}(IndexBuffer\_);}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ Render\ data}}
\DoxyCodeLine{00067\ \ \ \ \ ID3D11Buffer\ *VertexBuffer\_,\ *IndexBuffer\_;}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ Functions}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Initializes\ all\ the\ buffer\ objects/arrays}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{void}\ setupMesh(ID3D11Device\ *\mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_a2b7d9ef4b90331632cd9eaf2cc70d178}{dev}})\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ HRESULT\ hr;}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ vbd;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ vbd.Usage\ =\ D3D11\_USAGE\_IMMUTABLE;}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ vbd.ByteWidth\ =\ \textcolor{keyword}{static\_cast<}UINT\textcolor{keyword}{>}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_v_e_r_t_e_x}{VERTEX}})\ *\ \mbox{\hyperlink{interface_mesh_ae5b7568e5d475ead4b4d2d9135b04771}{vertices\_}}.size());}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ vbd.BindFlags\ =\ D3D11\_BIND\_VERTEX\_BUFFER;}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ vbd.CPUAccessFlags\ =\ 0;}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ vbd.MiscFlags\ =\ 0;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ D3D11\_SUBRESOURCE\_DATA\ initData;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ initData.pSysMem\ =\ \&\mbox{\hyperlink{interface_mesh_ae5b7568e5d475ead4b4d2d9135b04771}{vertices\_}}[0];}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ hr\ =\ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_a2b7d9ef4b90331632cd9eaf2cc70d178}{dev}}-\/>CreateBuffer(\&vbd,\ \&initData,\ \&VertexBuffer\_);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FAILED(hr))\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_ab24b7413980cfa2d86a029aebd8c5b91}{Close}}();}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Failed\ to\ create\ vertex\ buffer."{}});}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ D3D11\_BUFFER\_DESC\ ibd;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ ibd.Usage\ =\ D3D11\_USAGE\_IMMUTABLE;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ ibd.ByteWidth\ =\ \textcolor{keyword}{static\_cast<}UINT\textcolor{keyword}{>}(\textcolor{keyword}{sizeof}(UINT)\ *\ \mbox{\hyperlink{interface_mesh_aafd1efe92e5ea79aec6ce056aa32ecb9}{indices\_}}.size());}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ ibd.BindFlags\ =\ D3D11\_BIND\_INDEX\_BUFFER;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ ibd.CPUAccessFlags\ =\ 0;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ ibd.MiscFlags\ =\ 0;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ initData.pSysMem\ =\ \&\mbox{\hyperlink{interface_mesh_aafd1efe92e5ea79aec6ce056aa32ecb9}{indices\_}}[0];}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ hr\ =\ \mbox{\hyperlink{_robot_lib_2libraries_2assimp_2samples_2_simple_textured_directx11_2_simple_textured_directx11_2main_8cpp_a2b7d9ef4b90331632cd9eaf2cc70d178}{dev}}-\/>CreateBuffer(\&ibd,\ \&initData,\ \&IndexBuffer\_);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FAILED(hr))\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{interface_mesh_ab24b7413980cfa2d86a029aebd8c5b91}{Close}}();}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Failed\ to\ create\ index\ buffer."{}});}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
